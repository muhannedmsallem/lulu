(()=>{var e={};e.id=565,e.ids=[565],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},23324:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>d,pages:()=>u,routeModule:()=>x,tree:()=>c});var s=r(46911),a=r(16997),l=r(63794),i=r.n(l),n=r(69924),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let c=["",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,70894)),"C:\\Users\\USER-WT-11\\Desktop\\lulu-main\\app\\cart\\page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,87850))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,80347)),"C:\\Users\\USER-WT-11\\Desktop\\lulu-main\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,55818,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,87850))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["C:\\Users\\USER-WT-11\\Desktop\\lulu-main\\app\\cart\\page.js"],d="/cart/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/cart/page",pathname:"/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},61204:(e,t,r)=>{Promise.resolve().then(r.bind(r,90048))},90048:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var s=r(81515),a=r(78199),l=r(40222);let __WEBPACK_DEFAULT_EXPORT__=()=>{let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(""),[n,o]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[d,m]=(0,a.useState)(!1),[x,p]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let fetchCart=async()=>{let e=JSON.parse(localStorage.getItem("cart"))||[];t(e),p(!1)};fetchCart()},[]);let removeFromCart=r=>{let s=e.filter((e,t)=>t!==r);t(s),localStorage.setItem("cart",JSON.stringify(s))},confirmRemoveFromCart=e=>{confirm("هل أنت متأكد أنك تريد إزالة هذا العنصر من سلة التسوق؟")&&removeFromCart(e)},calculateTotalPrice=()=>e.reduce((e,t)=>e+t.price*(t.quantity||1),0),handleOrderSubmit=async s=>{s.preventDefault();let a={_type:"order",name:r,address:n,phoneNumber:c,items:e.map((e,t)=>({key:e.index,_type:"orderItem",productName:e.title||"منتج بدون اسم",productRef:{_type:"reference",_ref:e._id},quantity:e.quantity||1,price:e.price,totalPrice:e.price*(e.quantity||1)})),totalOrderPrice:calculateTotalPrice()};try{await l.Lp.create(a,{token:"skMuyw0al2locWT7DGTeGftHSEEIlQcWaykJV8J6qdXxVQrjouuBIEmlFGNTBOWuI0LFmIrRMN3RjEQsbFThTGkG9UqLKbm8aZncweW8nK17NSwco4hU9DNU0mxMSyrKFs2OObhyfoow1MtNlWQsoSKthTquglxVauiK8ecpCF3cgIO2pbZT"}),localStorage.removeItem("cart"),t([]),m(!0),console.log("تم تقديم الطلب بنجاح")}catch(e){console.error("خطأ في إنشاء الطلب:",e)}};return s.jsx("div",{className:"max-w-screen-lg mx-auto p-4 rtl",children:x?s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsx("div",{className:"loader"})}):(0,s.jsxs)("div",{children:[d&&s.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,s.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"تم تقديم الطلب بنجاح!"}),s.jsx("p",{className:"mb-4",children:"شكرًا على الشراء."}),s.jsx("button",{onClick:()=>{m(!1)},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"إغلاق"})]})}),!d&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("h1",{className:"text-black text-2xl font-bold mb-4",children:"سلة التسوق الخاصة بك"}),0===e.length?s.jsx("div",{className:"text-center mt-8",children:"سلة التسوق الخاصة بك فارغة."}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"grid gap-4",children:e.map((e,t)=>s.jsx("div",{className:"flex flex-col md:flex-row items-center bg-white shadow-md rounded-lg p-4 mb-4 md:mb-0",children:(0,s.jsxs)("div",{className:"flex md:flex-row flex-row-reverse items-center w-full",children:[e.images&&e.images[0]?s.jsx("img",{src:(0,l.uH)(e.images[0]).width(100).height(130).url(),alt:e.name,className:"w-24 h-34 rounded-lg mr-4 mb-4 md:mb-0 md:mr-4"}):s.jsx("div",{className:"w-24 h-24 bg-gray-200 flex items-center justify-center rounded-lg mr-4 mb-4 md:mb-0 md:mr-4",children:"لا توجد صورة"}),(0,s.jsxs)("div",{className:"flex-grow text-right",children:[(0,s.jsxs)("h2",{className:"text-black text-lg mb-2",children:["الإسم: ",e.title||"منتج بدون اسم"]}),(0,s.jsxs)("h2",{className:"text-black text-lg mb-2",children:["الحجم: ",e.size||""]}),(0,s.jsxs)("p",{className:"text-black mb-2",children:["السعر: ",e.price||"غير متوفر"," دينار"]}),(0,s.jsxs)("p",{className:"text-black mb-2",children:["الكمية: ",e.quantity||1]}),(0,s.jsxs)("p",{className:"text-black mb-2",children:["الإجمالي: $",e.price*(e.quantity||1)]}),s.jsx("button",{onClick:()=>confirmRemoveFromCart(t),className:"text-red-500 mt-2",children:"إزالة"})]})]})},t))}),s.jsx("div",{className:"mt-8 text-right",children:(0,s.jsxs)("h2",{className:"text-black font-bold",children:["الإجمالي: $",calculateTotalPrice()]})}),(0,s.jsxs)("form",{onSubmit:handleOrderSubmit,className:"mt-8",children:[(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"الاسم"}),s.jsx("input",{type:"text",value:r,onChange:e=>i(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"العنوان"}),s.jsx("input",{type:"text",value:n,onChange:e=>o(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"رقم الهاتف"}),s.jsx("input",{type:"text",value:c,onChange:e=>u(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0})]}),s.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"تقديم الطلب"})]})]})]})]})})}},70894:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>l,default:()=>o});var s=r(93384);let a=(0,s.createProxy)(String.raw`C:\Users\USER-WT-11\Desktop\lulu-main\app\cart\page.js`),{__esModule:l,$$typeof:i}=a,n=a.default,o=n}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[479,398,894,458],()=>__webpack_exec__(23324));module.exports=r})();