(()=>{var e={};e.id=21,e.ids=[21],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},64671:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>x,tree:()=>l});var s=r(46911),i=r(16997),a=r(63794),o=r.n(a),c=r(69924),n={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>c[e]);r.d(t,n);let l=["",{children:["shop",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,55094)),"C:\\Users\\USER-WT-11\\Desktop\\lulu-main\\app\\shop\\page.jsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,87850))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,80347)),"C:\\Users\\USER-WT-11\\Desktop\\lulu-main\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,55818,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,87850))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["C:\\Users\\USER-WT-11\\Desktop\\lulu-main\\app\\shop\\page.jsx"],d="/shop/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/shop/page",pathname:"/shop",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},97958:(e,t,r)=>{Promise.resolve().then(r.bind(r,162))},162:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var s=r(81515),i=r(78199),a=r(40222),o=r(54887);let __WEBPACK_DEFAULT_EXPORT__=()=>{let[e,t]=(0,i.useState)([]),[r,c]=(0,i.useState)([]),[n,l]=(0,i.useState)(null),[u,d]=(0,i.useState)(null),[p,x]=(0,i.useState)(!0),[h,m]=(0,i.useState)(!1),[f,g]=(0,i.useState)(!0),[_,y]=(0,i.useState)(1);(0,i.useRef)(),(0,i.useEffect)(()=>{let fetchInitialData=async()=>{try{let[e,r]=await Promise.all([a.Lp.fetch(`*[_type == "product"] | order(_createdAt desc) [0...20] {
              _id,
              title,
              price,
              images,
              "category": category->title,
              "subcategory": subcategory->title
            }`),a.Lp.fetch(`*[_type == "category"]{
              _id,
              title,
              "subcategories": *[_type == "subcategory" && references(^._id)]
            }`)]);t(e),c(r),x(!1)}catch(e){console.error("Error fetching data:",e),x(!1)}};fetchInitialData()},[]);let fetchMoreProducts=async()=>{m(!0);try{let e=await a.Lp.fetch(`*[_type == "product"] | order(_createdAt desc) [${20*_}...${(_+1)*20}] {
          _id,
          title,
          price,
          images,
          "category": category->title,
          "subcategory": subcategory->title
        }`);t(t=>[...t,...e]),y(e=>e+1),g(20===e.length),m(!1)}catch(e){console.error("Error fetching more products:",e),m(!1)}},handleCategoryClick=e=>{l(e),d(null)},handleSubcategoryClick=e=>{d(e)},b=u?e.filter(e=>e.category===n&&e.subcategory===u):n?e.filter(e=>e.category===n):e,j=(0,i.useRef)(),v=(0,i.useCallback)(e=>{!p&&!h&&f&&(j.current&&j.current.disconnect(),j.current=new IntersectionObserver(e=>{e[0].isIntersecting&&fetchMoreProducts()}),e&&j.current.observe(e))},[p,h,f]),q={padding:"0.5rem 1rem",fontSize:"1rem",border:"1px solid #ccc",borderRadius:"4px",margin:"0.5rem",cursor:"pointer",transition:"background-color 0.3s ease, border-color 0.3s ease"};return e?s.jsx("div",{className:"container mx-auto p-4",children:p?s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsx("div",{className:"loader"})}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex flex-col items-center mb-4",children:[s.jsx("div",{className:"flex flex-wrap justify-center",children:r.map(e=>s.jsx("button",{onClick:()=>handleCategoryClick(e.title),style:{...q,backgroundColor:n===e.title?"#f0f0f0":"white",borderColor:n===e.title?"#007bff":"#ccc"},children:e.title},e._id))}),n&&s.jsx("div",{className:"flex flex-wrap justify-center mt-4",children:r.find(e=>e.title===n)?.subcategories?.map(e=>s.jsx("button",{onClick:()=>handleSubcategoryClick(e.title),style:{...q,backgroundColor:u===e.title?"#f0f0f0":"white",borderColor:u===e.title?"#007bff":"#ccc"},children:e.title},e._id))})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-x-auto",children:b&&b.length>0?s.jsx(s.Fragment,{children:b.map((e,t)=>b.length===t+1?s.jsx("div",{ref:v,children:s.jsx(o.Z,{product:e})},e._id):s.jsx("div",{children:s.jsx(o.Z,{product:e})},e._id))}):s.jsx("h1",{className:"text-black text-center",children:"لا توجد منتجات"})}),h&&s.jsx("div",{className:"flex justify-center items-center mt-4",children:s.jsx("div",{className:"loader"})})]})}):s.jsx("div",{className:"flex items-center justify-center h-screen",children:"تحميل..."})}},55094:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>o,__esModule:()=>a,default:()=>n});var s=r(93384);let i=(0,s.createProxy)(String.raw`C:\Users\USER-WT-11\Desktop\lulu-main\app\shop\page.jsx`),{__esModule:a,$$typeof:o}=i,c=i.default,n=c}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[479,398,894,458,887],()=>__webpack_exec__(64671));module.exports=r})();