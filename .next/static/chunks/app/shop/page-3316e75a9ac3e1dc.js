(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{9020:function(e,t,r){Promise.resolve().then(r.bind(r,5469))},4432:function(e,t,r){"use strict";var c=r(7437);r(2265);var s=r(3383),i=r(7138);t.Z=e=>{let{product:t}=e;return(0,c.jsxs)("div",{className:"bg-white w-full max-w-sm mx-auto pt-4 shadow-md rounded-lg overflow-hidden flex flex-col justify-center items-center",children:[(0,c.jsx)("div",{className:"aspect-w-1 aspect-h-1 w-full",children:(0,c.jsx)("img",{className:"object-center w-full h-auto",src:(0,s.uH)(t.images[0]).width(300).height(400).url(),alt:t.title})}),(0,c.jsxs)("div",{className:"p-4 text-center",children:[(0,c.jsx)("h2",{className:"text-gray-800 text-lg font-semibold",children:t.title}),(0,c.jsxs)("p",{className:"text-gray-600 mt-1",children:["$",t.price]}),(0,c.jsx)(i.default,{href:"/product/".concat(t._id),passHref:!0,children:(0,c.jsx)("button",{className:"btn btn-primary mt-2",children:"More"})})]})]})}},5469:function(e,t,r){"use strict";r.r(t);var c=r(7437),s=r(2265),i=r(3383),n=r(4432);t.default=()=>{var e,t;let[r,l]=(0,s.useState)([]),[a,o]=(0,s.useState)([]),[d,u]=(0,s.useState)(null),[f,m]=(0,s.useState)(null),[h,x]=(0,s.useState)(!0),[g,p]=(0,s.useState)(!1),[j,b]=(0,s.useState)(!0),[y,v]=(0,s.useState)(1);(0,s.useRef)(),(0,s.useEffect)(()=>{(async()=>{try{let[e,t]=await Promise.all([i.Lp.fetch('*[_type == "product"] | order(_createdAt desc) [0...'.concat(20,'] {\n              _id,\n              title,\n              price,\n              images,\n              "category": category->title,\n              "subcategory": subcategory->title\n            }')),i.Lp.fetch('*[_type == "category"]{\n              _id,\n              title,\n              "subcategories": *[_type == "subcategory" && references(^._id)]\n            }')]);l(e),o(t),x(!1)}catch(e){console.error("Error fetching data:",e),x(!1)}})()},[]);let N=async()=>{p(!0);try{let e=await i.Lp.fetch('*[_type == "product"] | order(_createdAt desc) ['.concat(20*y,"...").concat((y+1)*20,'] {\n          _id,\n          title,\n          price,\n          images,\n          "category": category->title,\n          "subcategory": subcategory->title\n        }'));l(t=>[...t,...e]),v(e=>e+1),b(20===e.length),p(!1)}catch(e){console.error("Error fetching more products:",e),p(!1)}},_=e=>{u(e),m(null)},w=e=>{m(e)},k=f?r.filter(e=>e.category===d&&e.subcategory===f):d?r.filter(e=>e.category===d):r,C=(0,s.useRef)(),S=(0,s.useCallback)(e=>{!h&&!g&&j&&(C.current&&C.current.disconnect(),C.current=new IntersectionObserver(e=>{e[0].isIntersecting&&N()}),e&&C.current.observe(e))},[h,g,j]),E={padding:"0.5rem 1rem",fontSize:"1rem",border:"1px solid #ccc",borderRadius:"4px",margin:"0.5rem",cursor:"pointer",transition:"background-color 0.3s ease, border-color 0.3s ease"};return r?(0,c.jsx)("div",{className:"container mx-auto p-4",children:h?(0,c.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,c.jsx)("div",{className:"loader"})}):(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex flex-col items-center mb-4",children:[(0,c.jsx)("div",{className:"flex flex-wrap justify-center",children:a.map(e=>(0,c.jsx)("button",{onClick:()=>_(e.title),style:{...E,backgroundColor:d===e.title?"#f0f0f0":"white",borderColor:d===e.title?"#007bff":"#ccc"},children:e.title},e._id))}),d&&(0,c.jsx)("div",{className:"flex flex-wrap justify-center mt-4",children:null===(t=a.find(e=>e.title===d))||void 0===t?void 0:null===(e=t.subcategories)||void 0===e?void 0:e.map(e=>(0,c.jsx)("button",{onClick:()=>w(e.title),style:{...E,backgroundColor:f===e.title?"#f0f0f0":"white",borderColor:f===e.title?"#007bff":"#ccc"},children:e.title},e._id))})]}),(0,c.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-x-auto",children:k&&k.length>0?(0,c.jsx)(c.Fragment,{children:k.map((e,t)=>k.length===t+1?(0,c.jsx)("div",{ref:S,children:(0,c.jsx)(n.Z,{product:e})},e._id):(0,c.jsx)("div",{children:(0,c.jsx)(n.Z,{product:e})},e._id))}):(0,c.jsx)("h1",{className:"text-black text-center",children:"لا توجد منتجات"})}),g&&(0,c.jsx)("div",{className:"flex justify-center items-center mt-4",children:(0,c.jsx)("div",{className:"loader"})})]})}):(0,c.jsx)("div",{className:"flex items-center justify-center h-screen",children:"تحميل..."})}},3383:function(e,t,r){"use strict";r.d(t,{Lp:function(){return n},uH:function(){return a}});var c=r(8961),s=r(6103),i=r.n(s);let n=(0,c.eI)({projectId:"1pi0qth2",dataset:"production",apiVersion:"2021-03-25",useCdn:!0}),l=i()(n),a=e=>l.image(e)}},function(e){e.O(0,[923,138,971,23,744],function(){return e(e.s=9020)}),_N_E=e.O()}]);